webpackJsonp([0],{"/TYz":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("qYB2"),s=i("HRI7"),o=i("K60R"),n=o(a.a,s.a,!1,null,null,null);e.default=n.exports},"2P9C":function(t,e,i){var a=i("sCvK");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("IzqT")("66a28e44",a,!0)},"2eBK":function(t,e,i){"use strict";var a=i("PJh5"),s=i.n(a);e.a={props:["data"],watch:{data:function(t,e){e.from&&e.from._id&&this.removeEvent("online:"+e.from._id),this.initData()}},data:function(){return{title:"Empty Room",picture:"https://qiscuss3.s3.amazonaws.com/uploads/55c0c6ee486be6b686d52e5b9bbedbbf/2.png",status:""}},methods:{getPhoto:function(){return"private"===this.data.type?this.data.from.profile_picture||"https://qiscuss3.s3.amazonaws.com/uploads/55c0c6ee486be6b686d52e5b9bbedbbf/2.png":"group"===this.data.type?"none"===this.data.photo.small_file_url?"https://qiscuss3.s3.amazonaws.com/uploads/55c0c6ee486be6b686d52e5b9bbedbbf/2.png":this.data.photo.small_file_url:"https://qiscuss3.s3.amazonaws.com/uploads/55c0c6ee486be6b686d52e5b9bbedbbf/2.png"},removeEvent:function(t){this.$socket.off(t)},initData:function(){var t=this;switch(this.title="Empty Room",this.picture="https://qiscuss3.s3.amazonaws.com/uploads/55c0c6ee486be6b686d52e5b9bbedbbf/2.png",this.status="",this.data.type){case"group":this.title=this.data.title||"Empty Room";var e=",";this.data.members.forEach(function(i,a,s){a===s.length-1&&(e=""),t.status=t.status+" "+i.user.name+e});break;case"private":this.title=this.data.from.name||"Empty Room",this.listenUserStatus(this.data.from._id)}"none"!==this.data.photo.small_file_url?this.picture=this.data.photo.small_file_url:this.picture="https://qiscuss3.s3.amazonaws.com/uploads/55c0c6ee486be6b686d52e5b9bbedbbf/2.png"},listenUserStatus:function(t){var e=this;this.$socket.on("online:"+t,function(i){i.online?e.status="online":e.getUserStatus(t)}),this.getUserStatus(t)},getUserStatus:function(t){var e=this;this.$socket.emit("get_user_status",t,function(t){t.error||(t.data.status&&t.data.status.online?e.status="online":t.data.status&&t.data.status.last_active&&(e.status="Last visit "+s()(t.data.status.last_active).calendar()))})}},beforeMount:function(){this.initData()},beforeDestroy:function(){switch(this.data.type){case"group":break;case"private":this.$socket.off("online:"+this.data.from._id)}}}},"3kB1":function(t,e,i){var a=i("PWhg");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("IzqT")("54e651f1",a,!0)},"4GIj":function(t,e,i){e=t.exports=i("YHym")(!1),e.push([t.i,".msg-system{padding:5px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.message-system{-webkit-box-flex:0;-ms-flex:none;flex:none;max-width:100%!important;text-align:center;font-size:12.5px;line-height:14px;display:inline-block;border-radius:7.5px;color:rgba(69,90,100,.95);text-shadow:0 1px 0 hsla(0,0%,100%,.4);background-color:rgba(225,245,254,.92);padding:5px 12px 6px;-webkit-box-shadow:0 1px .5px rgba(0,0,0,.13);box-shadow:0 1px .5px rgba(0,0,0,.13)}._2f-RV{position:absolute;bottom:3px;right:7px}._1DZAH{color:rgba(0,0,0,.45);font-family:Roboto,sans-serif;font-size:11px;height:15px;line-height:15px;white-space:nowrap}._3EFt_{margin-top:1px;vertical-align:top;display:inline-block}.status-icon{display:inline-block;margin-left:3px}.header-text{padding:10px 10px 0}.header-text,.talktext{text-align:left;line-height:1.5em}.talktext{padding:5px 10px 10px}.header-text p,.talktext p{margin:0;padding:0;border:0;font-family:Roboto,sans-serif;font-size:14px;line-height:19px;color:#262626;vertical-align:baseline;outline:none;-webkit-margin-before:0;-webkit-margin-after:0}.talk-bubble{margin:5px 5px 0 1px;display:inline-block;position:relative;width:100%;height:auto;background-color:#ffffe0;border-radius:10px}.talk-bubble.msg-out{background:#dcf8c6}.msg{margin:.125em 0;padding:.5em 1.25em;background:#fff;border-radius:1em;-webkit-box-shadow:0 1px 3px rgba(0,0,0,.25);box-shadow:0 1px 3px rgba(0,0,0,.25);-ms-flex-item-align:start;align-self:flex-start}.ava-bx2{padding:0 15px 0 0}.bf-ava2{height:40px;width:40px}.ava2,.bf-ava2{position:relative;overflow:hidden;border-radius:50%}.ava2{display:block;opacity:1;-webkit-transition:opacity .15s ease-out;transition:opacity .15s ease-out;width:100%;height:100%;z-index:100}",""])},"6Go2":function(t,e,i){"use strict";function a(t){i("Zs5Q")}var s=i("ObGG"),o=i("Spnu"),n=i("K60R"),r=a,c=n(s.a,o.a,!1,r,null,null);e.a=c.exports},"7eUH":function(t,e,i){var a=i("s9mE");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("IzqT")("6ff5e1f8",a,!0)},"80oW":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"chatlist-panel-search"},[i("el-input",{attrs:{placeholder:"Search",icon:"search"},on:{change:t.onChange}})],1)},s=[],o={render:a,staticRenderFns:s};e.a=o},"8K5W":function(t,e,i){t.exports=i.p+"img/bg_chat.f9cebf2.jpg"},ABHB:function(t,e,i){"use strict";function a(t){i("7eUH")}var s=i("BrwH"),o=i("YQ9J"),n=i("K60R"),r=a,c=n(s.a,o.a,!1,r,null,null);e.a=c.exports},B4fv:function(t,e,i){"use strict";var a=i("mZ1w"),s=i.n(a),o=i("V/s/");e.a={computed:s()({},Object(o.mapState)(["user"])),watch:{user:function(t,e){this.user.profile_picture&&(this.profile_picture=this.user.profile_picture)}},data:function(){return{profile_picture:"https://qiscuss3.s3.amazonaws.com/uploads/55c0c6ee486be6b686d52e5b9bbedbbf/2.png"}},methods:{logOut:function(){this.$store.dispatch("logOut"),window.location.reload()}},beforeMount:function(){this.user.profile_picture&&(this.profile_picture=this.user.profile_picture)}}},B7k6:function(t,e,i){"use strict";var a=i("DY9Q"),s=i("lPOV"),o=i("K60R"),n=o(a.a,s.a,!1,null,null,null);e.a=n.exports},BrwH:function(t,e,i){"use strict";var a=i("v5QK"),s=i("V/s/");e.a={components:{ChatMessage:a.a},computed:Object(s.mapState)(["user"]),props:["data"],watch:{data:function(t,e){this.$socket.off("room_new_message:"+e._id),this.init(),this.firstInit(),this.chat=t}},data:function(){return{loading:!0,dataMessage:[],busy:!1,notEnd:!0,options:{chat_id:"",offset:0,limit:20},chat:this.data}},methods:{loadChat:function(){var t=this;this.notEnd&&!this.busy&&(this.busy=!0,this.$socket.emit("get_list_message",this.options,function(e){t.busy=!1,!e.error&&e.data&&(0===e.data.length?t.notEnd=!1:(e.data=e.data.reverse(),t.dataMessage=e.data.concat(t.dataMessage),t.options.offset=t.options.offset+t.options.limit,t.$refs.container.scrollTop=t.$refs.container.scrollHeight/4))}))},firstInit:function(){var t=this;this.busy=!0,this.$socket.emit("get_list_message",this.options,function(e){t.loading=!1,t.busy=!1,!e.error&&e.data&&(0===e.data.length?t.notEnd=!1:(e.data=e.data.reverse(),t.dataMessage=e.data.concat(t.dataMessage),t.options.offset=t.options.offset+t.options.limit))}),this.$socket.on("room_new_message:"+this.data._id,function(e){t.dataMessage.push(e),e.from._id!==t.user.id&&t.setAsRead()}),this.data.unread_count>0&&this.setAsRead()},init:function(){this.loading=!0,this.dataMessage=[],this.busy=!1,this.notEnd=!0,this.options.chat_id=this.data._id,this.options.offset=0,this.options.limit=20},setAsRead:function(){this.$socket.emit("set_as_read",{chat_id:this.data._id}),this.$store.commit("UPDATE_UNREAD_COUNT",this.data._id)}},mounted:function(){},beforeMount:function(){this.init(),this.firstInit()},beforeDestroy:function(){}}},DY9Q:function(t,e,i){"use strict";var a=i("hf04"),s=i("HCwO"),o=i("StuT"),n=i("td4r"),r=i("WGV0"),c=i("Rdj2"),l=i("V/s/");i("tBXR"),e.a={computed:Object(l.mapState)(["showWelcome"]),data:function(){return{search:""}},components:{ChatBox:a.a,Background:s.a,Heading:o.a,Welcome:n.a,Search:r.a,ContactList:c.a},methods:{updateSearch:function(t){this.search=t}}}},FzJk:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.showTime?i("div",{staticClass:"msg-system"},[i("div",{staticClass:"message-system"},[i("span",{staticClass:"message-system-body"},[i("span",{attrs:{dir:"auto"}},[t._v(t._s(t.startTime))])])])]):t._e(),i("el-row",[i("el-col",{attrs:{span:t.getFirstSpan}},[i("div",{staticClass:"ava-bx2"},[i("div",{staticClass:"bf-ava2"},[t.showPicture?i("img",{staticClass:"ava2",attrs:{src:t.data.from.profile_picture||"https://qiscuss3.s3.amazonaws.com/uploads/55c0c6ee486be6b686d52e5b9bbedbbf/2.png"}}):t._e()])])]),i("el-col",{attrs:{span:t.getSecondSpan}},[i("div",{staticClass:"talk-bubble tri-right btm-right",class:{"msg-out":t.fromMe}},[t.showName?i("div",{staticClass:"header-text"},[i("p",[i("b",[t._v(t._s(t.data.from.name))])])]):t._e(),i("div",{staticClass:"talktext"},[i("p",[t._v(t._s(t.data.text))])]),i("div",{staticClass:"_2f-RV"},[i("div",{staticClass:"_1DZAH",attrs:{role:"button"}},[i("span",{staticClass:"_3EFt_"},[t._v(t._s(t.time))]),t.fromMe?i("div",{staticClass:"status-icon"},[i("span",{attrs:{"data-icon":"msg-check"}},[i("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 15",width:"16",height:"15"}},[i("path",{attrs:{fill:"#92A58C",d:"M10.91 3.316l-.478-.372a.365.365 0 0 0-.51.063L4.566 9.879a.32.32 0 0 1-.484.033L1.891 7.769a.366.366 0 0 0-.515.006l-.423.433a.364.364 0 0 0 .006.514l3.258 3.185c.143.14.361.125.484-.033l6.272-8.048a.365.365 0 0 0-.063-.51z"}})])])]):t._e()])])])])],1)],1)},s=[],o={render:a,staticRenderFns:s};e.a=o},GeF3:function(t,e,i){"use strict";var a=i("mZ1w"),s=i.n(a),o=i("V/s/"),n=i("PJh5"),r=i.n(n);e.a={props:["data","before","chat"],computed:s()({showTime:function(){if(!this.before)return!0;var t=r()(this.before.createdAt);return r()(this.data.createdAt).diff(t,"hours")>23},getFirstSpan:function(){return this.isMe()?12:2},getSecondSpan:function(){return this.isMe(),12},isAlert:function(){return"alert"===this.data.type},showName:function(){return!this.isMe()&&("private"!==this.chat.type&&("group"!==this.chat.type||(!this.before||this.before.from._id!==this.data.from._id)))},fromMe:function(){return this.isMe()},showPicture:function(){return!this.isMe()&&(!this.before||this.before.from._id!==this.data.from._id)}},Object(o.mapState)(["user"])),methods:{isMe:function(){return this.data.from._id===this.user.id},getDate:function(){return r()().format("L")}},data:function(){return{time:r()(this.data.createdAt).format("LT"),startTime:r()(this.data.createdAt).format("L"),picture:this.data.from.profile_picture||"https://qiscuss3.s3.amazonaws.com/uploads/55c0c6ee486be6b686d52e5b9bbedbbf/2.png"}},beforeMount:function(){}}},GndR:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-row",{staticClass:"pane-header pane-list-header"},[i("el-col",{staticClass:"pane-list-user",attrs:{span:16}},[i("div",{staticClass:"avatar",staticStyle:{height:"40px",width:"40px",cursor:"pointer"}},[i("span",[i("img",{staticClass:"avatar-image is-loaded",staticStyle:{height:"40px",width:"40px"},attrs:{src:t.profile_picture}})])])]),i("el-col",{staticClass:"pane-list-controls",attrs:{span:8}},[i("el-row",{staticStyle:{top:"11px","text-align":"right"}},[i("el-col",{attrs:{span:16}},[i("i",{staticClass:"el-icon-message"})]),i("el-col",{staticStyle:{cursor:"pointer"},attrs:{span:8}},[i("el-dropdown",{attrs:{trigger:"click"}},[i("span",{staticClass:"el-dropdown-link"},[i("i",{staticClass:"el-icon-more"})]),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{nativeOn:{click:function(e){t.logOut(e)}}},[t._v("Logout")])],1)],1)],1)],1)],1)],1)},s=[],o={render:a,staticRenderFns:s};e.a=o},HCwO:function(t,e,i){"use strict";function a(t){i("2P9C")}var s=i("x1ZM"),o=i("K60R"),n=a,r=o(null,s.a,!1,n,null,null);e.a=r.exports},HRI7:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement;return(t._self._c||e)("app",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.loading,expression:"loading",modifiers:{fullscreen:!0,lock:!0}}]})},s=[],o={render:a,staticRenderFns:s};e.a=o},IO84:function(t,e,i){e=t.exports=i("YHym")(!1),e.push([t.i,"body,html{height:100%}.cDiv,body,html{width:100%;overflow:hidden;padding:0;margin:0;-webkit-box-sizing:border-box;box-sizing:border-box}.cDiv{height:100vh}.message{padding:0!important;margin:0!important;background-size:cover;overflow:auto;height:100%}.container{padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media (min-width:768px){.container{width:750px}}@media (min-width:992px){.container{width:970px}}@media (min-width:1200px){.container{width:1170px}}.app{position:relative;overflow:hidden;top:19px;height:calc(100% - 38px);margin:auto!important;padding:0!important;-webkit-box-shadow:0 1px 1px 0 rgba(0,0,0,.06),0 2px 5px 0 rgba(0,0,0,.2);box-shadow:0 1px 1px 0 rgba(0,0,0,.06),0 2px 5px 0 rgba(0,0,0,.2)}.heading{padding:10px 16px 10px 15px;margin:0!important;height:60px;width:100%;background-color:#eee;z-index:1000}.heading-avatar{padding:0!important;cursor:pointer}.heading-avatar-icon img{border-radius:50%;height:40px;width:40px}.heading-name{padding:0!important;cursor:pointer}.heading-name-meta{font-weight:700;font-size:100%;padding:5px 5px 0;text-align:left;text-overflow:ellipsis;white-space:nowrap;color:#000;display:block}.heading-online{display:none;padding:0 5px;font-size:12px;color:#93918f}.heading-compose{padding:0}.heading-compose i{text-align:center;padding:5px;color:#93918f;cursor:pointer}.heading-dot{padding:0;margin-left:10px}.heading-dot i{text-align:right;padding:5px;color:#93918f;cursor:pointer}",""])},IbrM:function(t,e,i){"use strict";var a=i("zCPh"),s=i("ABHB"),o=i("6Go2"),n=i("V/s/");e.a={computed:Object(n.mapState)(["current_chat"]),components:{ChatBoxHeader:a.a,ChatList:s.a,ChatInput:o.a},watch:{current_chat:function(t,e){e._id&&this.leave_room(e._id),t._id&&this.join_room(t._id)}},data:function(){return{}},methods:{join_room:function(t){this.$socket.emit("join_room",t)},leave_room:function(){this.$socket.emit("leave_room",name)}},beforeMount:function(){this.current_chat._id&&this.join_room(this.current_chat._id)}}},MNy2:function(t,e,i){e=t.exports=i("YHym")(!1),e.push([t.i,"._2jVLL{padding:0;background-color:hsla(0,0%,100%,.6);-webkit-box-ordinal-group:4;-ms-flex-order:3;order:3;-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%;z-index:1}._2jVLL,._3oju3{position:relative;-webkit-box-sizing:border-box;box-sizing:border-box}._3oju3{border-left:1px solid rgba(0,0,0,.08);background-color:#f5f1ee;padding:10px 19px;-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;max-width:100%;z-index:2}",""])},ObGG:function(t,e,i){"use strict";var a=i("V/s/");e.a={computed:Object(a.mapState)(["user"]),props:["data"],data:function(){return{msg:""}},methods:{startTyping:function(){this.data._id&&this.$socket.emit("custom",{event:"start_chat_action_"+this.data._id,message:(this.user.name||"someone")+" is typing..."})},endTyping:function(){this.data._id&&this.$socket.emit("custom",{event:"end_chat_action_"+this.data._id,message:(this.user.name||"someone")+" is typing..."})},inputHandler:function(t){13!==t.keyCode||t.shiftKey||(t.preventDefault(),this.submitForm())},submitForm:function(){var t=this;this.msg&&this.$socket.emit("send_message",{chat_id:this.data._id,text:this.msg},function(e){e.error?t.$message.error(e.message||"Oops, this is a error message."):t.msg=""})}}}},P5cJ:function(t,e,i){var a=i("4GIj");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("IzqT")("7b8c1606",a,!0)},PWhg:function(t,e,i){e=t.exports=i("YHym")(!1),e.push([t.i,".intro-text{font-size:14px;color:#929fa6;line-height:20px}.intro .intro-title{color:#4b5961;font-size:36px;font-weight:400}.intro{height:100%;background-color:#f7f9fa;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-sizing:border-box;box-sizing:border-box;border-left:1px solid rgba(0,0,0,.08);position:relative;padding-bottom:28px;padding-top:28px;cursor:default}.pane-body{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;z-index:1}.intro .intro-body{text-align:center;margin-top:-20px;max-width:460px;width:80%}.intro .intro-image{width:250px;height:250px;margin:0 auto;-webkit-transform-origin:center;transform-origin:center;opacity:0;background-repeat:no-repeat;background-size:contain;-webkit-transition:height .3s ease;transition:height .3s ease}.intro-image{background-image:url("+i("XGAo")+")}",""])},Rdj2:function(t,e,i){"use strict";function a(t){i("lDHO")}var s=i("cNkb"),o=i("XYSG"),n=i("K60R"),r=a,c=n(s.a,o.a,!1,r,null,null);e.a=c.exports},Spnu:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("footer",{staticClass:"_2jVLL"},[i("div",{staticClass:"_3oju3"},[i("el-row",{attrs:{gutter:10}},[i("el-col",{attrs:{span:1}},[i("el-button",{attrs:{type:"text",icon:"arrow-up"}})],1),i("el-col",{attrs:{span:22}},[i("form",{attrs:{action:""}},[i("el-input",{attrs:{type:"textarea",size:"large",autosize:{minRows:1,maxRows:1},placeholder:"Type message"},on:{focus:t.startTyping,blur:t.endTyping},nativeOn:{keydown:function(e){t.inputHandler(e)}},model:{value:t.msg,callback:function(e){t.msg=e},expression:"msg"}})],1)]),i("el-col",{attrs:{span:1}},[i("el-button",{ref:"submit",attrs:{type:"text",icon:"d-arrow-right"}})],1)],1)],1)])},s=[],o={render:a,staticRenderFns:s};e.a=o},StuT:function(t,e,i){"use strict";function a(t){i("bsP6")}var s=i("B4fv"),o=i("GndR"),n=i("K60R"),r=a,c=n(s.a,o.a,!1,r,null,null);e.a=c.exports},VwS3:function(t,e,i){e=t.exports=i("YHym")(!1),e.push([t.i,".chatlist-panel-body{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;height:calc(100% - 110px);background-color:#fefefe;overflow-y:auto;overflow-x:hidden;z-index:1}",""])},WGV0:function(t,e,i){"use strict";function a(t){i("nGQT")}var s=i("yQMQ"),o=i("80oW"),n=i("K60R"),r=a,c=n(s.a,o.a,!1,r,null,null);e.a=c.exports},WhJb:function(t,e,i){"use strict";var a=i("PJh5"),s=i.n(a);e.a={props:["item"],data:function(){return{is_action:!1,action_message:"no action"}},methods:{getPhoto:function(){return"private"===this.item.type?this.item.from.profile_picture||"https://qiscuss3.s3.amazonaws.com/uploads/55c0c6ee486be6b686d52e5b9bbedbbf/2.png":"group"===this.item.type?"none"===this.item.photo.small_file_url?"https://qiscuss3.s3.amazonaws.com/uploads/55c0c6ee486be6b686d52e5b9bbedbbf/2.png":this.item.photo.small_file_url:"https://qiscuss3.s3.amazonaws.com/uploads/55c0c6ee486be6b686d52e5b9bbedbbf/2.png"},getDate:function(t){return s()(t).fromNow()},listenAction:function(){var t=this;this.$socket.on("start_chat_action_"+this.item._id,function(e){e.message&&(t.action_message=e.message,t.is_action=!0)}),this.$socket.on("end_chat_action_"+this.item._id,function(e){t.is_action=!1})}},beforeMount:function(){this.listenAction()},beforeDestroy:function(){this.$socket.off("start_chat_action_"+this.item._id),this.$socket.off("end_chat_action_"+this.item._id)}}},XGAo:function(t,e,i){t.exports=i.p+"img/opentrip-round.1295bf4.png"},XYSG:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadChatList,expression:"loadChatList"},{name:"loading",rawName:"v-loading",value:t.loadingSide,expression:"loadingSide"}],staticClass:"chatlist-panel-body",attrs:{"infinite-scroll-disabled":"busy","infinite-scroll-immediate-check":"notEnd","infinite-scroll-throttle-delay":"500","infinite-scroll-distance":"20"}},t._l(t.chat,function(e){return i("chat-item",{key:e._id,attrs:{item:e},nativeOn:{click:function(i){t.openChat(e)}}})}))},s=[],o={render:a,staticRenderFns:s};e.a=o},YQ9J:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"chat-scroll",rawName:"v-chat-scroll"},{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"container",staticClass:"chatlist-panel-body-box bg_list",on:{"scroll-top":function(e){t.loadChat()}}},[i("div",{staticClass:"bf-msg"},t._l(t.dataMessage,function(e,a){return i("chat-message",{key:a,attrs:{data:e,before:t.dataMessage[a-1],chat:t.chat}})}))])},s=[],o={render:a,staticRenderFns:s};e.a=o},ZA29:function(t,e,i){var a=i("oPiY");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("IzqT")("1de32785",a,!0)},Zs5Q:function(t,e,i){var a=i("MNy2");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("IzqT")("2c340fb6",a,!0)},aaVn:function(t,e,i){"use strict";function a(t){i("n6GW")}var s=i("WhJb"),o=i("g1LP"),n=i("K60R"),r=a,c=n(s.a,o.a,!1,r,null,null);e.a=c.exports},bsP6:function(t,e,i){var a=i("ujuS");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("IzqT")("09e300ba",a,!0)},cNkb:function(t,e,i){"use strict";var a=i("mZ1w"),s=i.n(a),o=i("V/s/"),n=i("aaVn");e.a={components:{ChatItem:n.a},props:{search:{type:String,default:""}},computed:s()({filteredItems:function(){var t=this;try{return this.chat.filter(function(e){return e.room_name.toLowerCase().indexOf(t.search.toLowerCase())>-1})}catch(t){return[]}}},Object(o.mapState)(["chat"])),data:function(){return{loadingSide:!0,busy:!1,notEnd:!0,list:[],options:{offset:0,limit:20}}},methods:{openChat:function(t){this.$store.commit("SET_CURRENT_CHAT",t)},loadChatList:function(){var t=this;if(this.notEnd)try{this.busy=!0,this.$socket.emit("get_list_chat",this.options,function(e){if(t.busy=!1,t.loadingSide=!1,e.error)return t.$message({message:e.message||"unknown error",showClose:!0,type:"error"});0===e.data.length?t.notEnd=!1:(t.options.offset=t.options.offset+t.options.limit,t.$store.commit("PUSH_CHAT",e.data))})}catch(t){this.busy=!1,this.loadingSide=!1,this.$message({message:t.message,showClose:!0,type:"error"})}}},beforeMount:function(){this.$store.commit("SET_WELCOME",!0);var t=[];this.$store.commit("SET_CHAT",t)}}},g1LP:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row sideBar-body"},[i("el-col",{staticClass:"col-sm-3 col-xs-3 sideBar-avatar",attrs:{span:4}},[i("div",{staticClass:"avatar-icon"},[i("img",{attrs:{src:t.getPhoto()}})])]),i("el-col",{staticClass:"col-sm-9 col-xs-9 sideBar-main",attrs:{span:20}},[i("el-row",{staticClass:"row"},[i("el-col",{staticClass:"col-sm-8 col-xs-8 sideBar-name",attrs:{span:16}},["group"==t.item.type?i("span",{staticClass:"name-meta"},[t._v(t._s(t.item.title))]):t._e(),"private"==t.item.type?i("span",{staticClass:"name-meta"},[t._v(t._s(t.item.from.name))]):t._e()]),i("el-col",{staticClass:"col-sm-4 col-xs-4 pull-right sideBar-time",attrs:{span:8}},[i("span",{staticClass:"time-meta pull-right"},[t._v(t._s(t.getDate(t.item.last_message_date))+"\n                ")])])],1),i("el-row",[i("el-col",{staticClass:"sideBar-message",attrs:{span:20}},[t.is_action?t._e():i("span",{staticClass:"message_meta"},[t._v("\n           "+t._s(t.item.last_message)+"\n          ")]),t.is_action?i("span",{staticClass:"chat_action"},[t._v("\n           "+t._s(t.action_message)+"\n          ")]):t._e()]),i("el-col",{attrs:{span:4}},[i("el-badge",{staticClass:"item",attrs:{value:t.item.unread_count,max:99}})],1)],1)],1)],1)},s=[],o={render:a,staticRenderFns:s};e.a=o},gr9J:function(t,e,i){e=t.exports=i("YHym")(!1),e.push([t.i,".chat_action{font-size:16px;color:#ea6666;font-style:italic}.sideBar-body{position:relative;padding:10px!important;border-bottom:1px solid #f7f7f7;margin:0!important;cursor:pointer}.sideBar-body:hover{background-color:#f2f2f2}.sideBar-avatar{text-align:center;padding:0!important}.avatar-icon img{border-radius:50%;height:49px;width:49px}.sideBar-main,.sideBar-main .row{padding:0!important}.sideBar-main .row{margin:0!important}.sideBar-name{padding:0 0 0 17px!important}.sideBar-message{padding:0 10px 10px 17px!important}.name-meta{font-size:19px;color:#000}.message_meta,.name-meta{font-weight:400;line-height:21px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;text-align:left}.message_meta{font-size:16px;color:#454545}.time-meta{text-align:right;font-size:12px;padding:1%!important;color:rgba(0,0,0,.4);vertical-align:baseline}.chatlist-panel-body{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;height:calc(100% - 110px);background-color:#fefefe;overflow-y:auto;overflow-x:hidden;z-index:1}",""])},hez1:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},s=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"intro pane-body"},[i("div",{staticClass:"intro-body"},[i("div",{staticClass:"intro-image",staticStyle:{transform:"scale(1)",opacity:"1"}}),i("div",{staticClass:"intro-text-container",staticStyle:{opacity:"1",transform:"translateY(0px)"}},[i("h1",{staticClass:"intro-title"},[t._v("Welcome to OpenTrip Web Chat")])]),i("div",{staticClass:"intro-text"},[t._v("\r\n      Opentrip Web Chat helps make it easy for you to discuss your trips through the browser. select a contact to start the conversation\r\n    ")])])])}],o={render:a,staticRenderFns:s};e.a=o},hf04:function(t,e,i){"use strict";function a(t){i("wWQJ")}var s=i("IbrM"),o=i("oa23"),n=i("K60R"),r=a,c=n(s.a,o.a,!1,r,null,null);e.a=c.exports},lDHO:function(t,e,i){var a=i("VwS3");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("IzqT")("73c05ac2",a,!0)},lPOV:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"cDiv"},[i("background"),i("el-row",{staticClass:"container app"},[i("el-col",{staticStyle:{height:"100%","background-color":"#fefefe"},attrs:{span:8}},[i("heading"),i("search",{on:{update:t.updateSearch}}),i("contact-list",{attrs:{search:t.search}})],1),i("el-col",{staticStyle:{height:"100%"},attrs:{span:16}},[i("div",{staticClass:"message"},[t.showWelcome?t._e():i("chat-box"),t.showWelcome?i("welcome"):t._e()],1)])],1)],1)},s=[],o={render:a,staticRenderFns:s};e.a=o},n2HU:function(t,e,i){e=t.exports=i("YHym")(!1),e.push([t.i,".chat{width:100%;height:100%;background-color:#f7f9fa}",""])},n6GW:function(t,e,i){var a=i("gr9J");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("IzqT")("49cb7720",a,!0)},nGQT:function(t,e,i){var a=i("qo6o");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("IzqT")("5e7eaa36",a,!0)},oPiY:function(t,e,i){e=t.exports=i("YHym")(!1),e.push([t.i,".my-medium{font-size:medium}._3Kxus{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}._1i0-u{-webkit-box-flex:0;-ms-flex:none;flex:none}._2EbF-{text-align:left;margin-top:-1px;display:-webkit-box;display:-ms-flexbox;display:flex;line-height:normal;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}._2zCDG{font-weight:400;font-size:16px;line-height:21px;color:#000;display:-webkit-box;display:-ms-flexbox;display:flex}._1wjpf,._2zCDG{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}._1wjpf{position:relative}.Gd51Q._3sgkv{color:rgba(0,0,0,.6);font-size:13px;line-height:20px;min-height:20px}._3sgkv{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}.O90ur{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto}.header{-webkit-box-sizing:border-box;box-sizing:border-box;height:59px;width:100%;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative;z-index:1000;background-color:#eee;padding:10px 16px}.header,.name-blox{display:-webkit-box;display:-ms-flexbox;display:flex}.name-blox{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;min-width:0;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.ava-bx{padding:0 15px 0 0}.bf-ava{height:40px;width:40px;background-color:#dfe5e7}.ava,.bf-ava{position:relative;overflow:hidden;border-radius:50%}.ava{display:block;opacity:1;-webkit-transition:opacity .15s ease-out;transition:opacity .15s ease-out;width:100%;height:100%;z-index:100}",""])},oa23:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"chat"},[i("chat-box-header",{attrs:{data:t.current_chat}}),i("chat-list",{attrs:{data:t.current_chat}}),i("chat-input",{attrs:{data:t.current_chat}})],1)},s=[],o={render:a,staticRenderFns:s};e.a=o},qYB2:function(t,e,i){"use strict";var a=i("mZ1w"),s=i.n(a),o=i("B7k6"),n=i("V/s/");e.a={middleware:"auth",data:function(){return{loading:!1}},head:function(){return{title:this.total_unread>0?"("+this.total_unread+") OpenTrip":"OpenTrip",meta:[{hid:"description",name:"description",content:"OpenTrip Web client for chat"}]}},computed:s()({},Object(n.mapState)(["authenticated","total_unread","current_chat"])),components:{App:o.a},methods:{init:function(){var t=this;this.$store.commit("SET_ROOM_NOW",0),this.$store.commit("SET_UNREAD_COUNT",0),this.$initSocket(),this.$socket.on("connect",function(){}),this.$socket.on("success",function(e){t.$socket.on("new_message:"+e.user.id,function(e){t.current_chat._id===e._id?t.$store.commit("JUST_UPDATE",e):(t.$store.commit("PLUS_UNREAD",e.unread_count),t.$store.commit("ADD_OR_UPDATE_CHAT",e))}),t.$store.commit("SET_USER",e.user)}),this.$socket.on("error",function(e){t.$store.commit("SET_AUTH",!1),t.$store.dispatch("logOut"),window.location.reload()}),this.$socket.on("disconnect",function(){t.$message({message:"discconnect",showClose:!0,type:"error"})})}},mounted:function(){try{this.init()}catch(t){this.init()}}}},qo6o:function(t,e,i){e=t.exports=i("YHym")(!1),e.push([t.i,".chatlist-panel-search{background-color:#fbfbfb;-webkit-box-flex:0;-ms-flex:none;flex:none;padding:10px;border-bottom:1px solid rgba(0,0,0,.08)}",""])},s9mE:function(t,e,i){e=t.exports=i("YHym")(!1),e.push([t.i,".bf-msg{-ms-flex-flow:column;flex-flow:column;list-style:none;margin:0;padding:15px}.bf-msg,.chatlist-panel-body-box{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal}.chatlist-panel-body-box{position:relative;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;height:calc(100% - 114px);background-color:#fefefe;overflow-y:auto;overflow-x:hidden;z-index:1}.bg_list{background:#efe7dd url("+i("8K5W")+") repeat}",""])},sCvK:function(t,e,i){e=t.exports=i("YHym")(!1),e.push([t.i,'#wrapper{display:block;overflow:auto;background:#dfdfdf -webkit-gradient(linear,left top,left bottom,from(#dddbd1),to(#d2dbdc));background:#dfdfdf linear-gradient(180deg,#dddbd1,#d2dbdc);width:100%;height:100%;position:fixed;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;z-index:0}#wrapper:before{position:absolute;z-index:-1;background-color:#f4eb2c;width:100%;height:222px;content:"";top:0;left:0}',""])},tBXR:function(t,e,i){var a=i("IO84");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("IzqT")("64d42334",a,!0)},td4r:function(t,e,i){"use strict";function a(t){i("3kB1")}var s=i("hez1"),o=i("K60R"),n=a,r=o(null,s.a,!1,n,null,null);e.a=r.exports},ujuS:function(t,e,i){e=t.exports=i("YHym")(!1),e.push([t.i,".menu-horizontal .menu-horizontal-item:first-of-type{margin-left:0}.menu-horizontal-item{border-radius:50%;text-align:center;-webkit-transition:background-color .18s ease;transition:background-color .18s ease}.menu-horizontal-item,.pane-list-controls{-webkit-box-flex:0;-ms-flex:none;flex:none;height:100%}.pane-header.pane-list-header{-webkit-box-flex:0;-ms-flex:none;flex:none;height:59px;width:100%;background-color:#eee;-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;z-index:1000;padding:10px 16px 10px 15px;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end}.pane-list-user{-webkit-box-flex:1;-ms-flex:1;flex:1}.avatar{position:relative;border-radius:50%;overflow:hidden;background-color:#dfe5e7}.avatar-image.is-loaded{opacity:1}.avatar-image{display:block;opacity:0;position:relative;-webkit-transition:opacity .15s ease-out;transition:opacity .15s ease-out;width:100%;height:100%;z-index:100;border-radius:50%;overflow:hidden}",""])},v5QK:function(t,e,i){"use strict";function a(t){i("P5cJ")}var s=i("GeF3"),o=i("FzJk"),n=i("K60R"),r=a,c=n(s.a,o.a,!1,r,null,null);e.a=c.exports},wWQJ:function(t,e,i){var a=i("n2HU");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("IzqT")("20289ca4",a,!0)},x1ZM:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{attrs:{id:"wrapper"}})},s=[],o={render:a,staticRenderFns:s};e.a=o},xW31:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-row",{staticClass:"header"},[i("div",{staticClass:"ava-bx"},[i("div",{staticClass:"bf-ava"},[i("img",{staticClass:"ava",attrs:{src:t.getPhoto()}})])]),i("div",{staticClass:"name-blox"},[i("div",{staticClass:"_2EbF-"},[i("div",{staticClass:"_2zCDG"},[i("span",{staticClass:"_1wjpf",attrs:{dir:"auto",title:t.title}},[t._v(t._s(t.title))])])]),i("div",{staticClass:"_3sgkv Gd51Q"},[i("span",{staticClass:"O90ur",attrs:{title:t.status}},[t._v(t._s(t.status))])])]),i("div",{staticClass:"_1i0-u"},[i("div",{staticClass:"_3Kxus",staticStyle:{cursor:"pointer"}},[i("el-dropdown",{attrs:{trigger:"click"}},[i("span",{staticClass:"el-dropdown-link"},[i("i",{staticClass:"el-icon-more"})]),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",[i("span",{staticClass:"my-medium"},[t._v("Delete Conversation")])])],1)],1)],1)])])},s=[],o={render:a,staticRenderFns:s};e.a=o},yQMQ:function(t,e,i){"use strict";e.a={methods:{onChange:function(t){this.$emit("update",t)}}}},zCPh:function(t,e,i){"use strict";function a(t){i("ZA29")}var s=i("2eBK"),o=i("xW31"),n=i("K60R"),r=a,c=n(s.a,o.a,!1,r,null,null);e.a=c.exports}});
//# sourceMappingURL=index.f23b3a400549e18a2be9.js.map